<!DOCTYPE html>
<html lang="en-US">
  <head>
    <title>the post reiteration station</title>
    <meta charset="utf-8">
    <meta name="author" content="Voxalice">
    <meta name="description" content="This webpage contains some of my most common responses to Scratch forum topics.">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="/dark.css" rel="stylesheet" type="text/css" media="all">
  </head>
  
  <body>
    <h1>Personal Scratch forums QuickReply</h1>
    
    <h2 id="displayName">This webpage requires JavaScript.</h2>
    <div id="dataView"></div>
    
    <p style="display: none;" id="textDisplay"><textarea style='width: 50em; height: 10em; max-width: 95%;' id="copier" onclick='this.select()' readonly></textarea></p>
    <p style="display: none;" id="textEditable">Replace "__EDITABLE__" with: <input type="text" id="editBox" placeholder="Replacement" onchange="replaceEditable(this.value)"></p>
    
    <p style="display: none;" id="rejectedLoading">Fetching rejected suggestions...</p>
    <p style="display: none;" id="rejectedChooser">
      <a href="https://scratch.mit.edu/discuss/topic/343602/" target="blank">Open The Official List of Rejected Suggestions in a new tab</a>, find the relevant suggestion, then type its number here.
      <br><br><input type="text" id="rejectedNumber" placeholder="X.Y"> <button onclick='quoteRejected(document.querySelector("#rejectedNumber").value.toString())'>Quote</button>
      <small> - Clicking "Quote" will make a request to scratch.mit.edu.</small>
    </p>
    
    <small>This webpage contains some of my most common responses to <a href="https://scratch.mit.edu/discuss/">Scratch forum topics</a>.
    <br>To view this webpage's source code, <a href='https://github.com/voxalice2/voxalice2.github.io/blob/main/quickreply.html'>click here!</a>
    <br><br><details><summary>Updates</summary><hr>
    Update 1 (2024-12-20) - Original version<hr>
    Update 2 (2024-12-21) - Fixed textboxes<hr>
    Update 3 (2024-12-22) - Added invisible items, <a onclick='displayView("test")'>test items</a>, and a JavaScript-disabled warning<hr>
    Update 4 (2024-12-23) - Added editable items<hr>
    Update 5 (2025-01-01) - Added function items, including a built-in quoter for The Official List of Rejected Suggestions<hr>
    Update 6 (2025-01-05) - Fixed issues with scraping rejected suggestions, and cleaned up some code<hr>
    Update 7 (2025-01-08) - Fixed title (this page originally shared a title with <a href="/imagif">/imagif</a>)<hr>
    Update 8 (2025-01-11) - Add page metadata
    </details></small>
    
    <script>
      'use strict';
      
      // View data starts here
    
      var viewData = {
        
        // Root
        
        0: {"name": "Choose a forum:",
            "text": false,
            "hidden": false,
            "data": [6, 1, 2, 19, 20, 25]},
            
        6: {"name": "General (any forum)",
            "text": false,
            "hidden": false,
            "data": ["test", 7, 8, 23]},
            
        1: {"name": "Bugs and Glitches",
            "text": false,
            "hidden": false,
            "data": [3, 4, 9, 12, 11, 24, 28]},
            
        2: {"name": "Suggestions",
            "text": false,
            "hidden": false,
            "data": [5, 10, 27]},
            
        19: {"name": "Things I'm Making and Creating",
            "text": false,
            "hidden": false,
            "data": [21]},
            
        20: {"name": "Things I'm Reading and Playing",
            "text": false,
            "hidden": false,
            "data": [22]},
            
        25: {"name": "Questions about Scratch",
            "text": false,
            "hidden": false,
            "data": [26]},
            
        // Bugs and Glitches
            
        3: {"name": "Search Engine Down",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "[url=https://scratch.mit.edu/discuss/topic/795087/]Scratch's search engine is currently broken[/url], and all we can do is wait for it to be fixed.\n" +
                    "Unfortunately, no one knows when this will be fixed or how to fix it.\n" +
                    "This affects everyone on Scratch, so the Scratch Team is aware of the situation.\n\n" +
                    'For now, you can type "site:scratch.mit.edu [i](search query)[/i]" into a search engine like Google to work around this bug.\n' +
                    'You should also discuss the bug here: https://scratch.mit.edu/discuss/topic/790866/\n\n' +
                    "This also affects [url=https://scratch.mit.edu/explore/projects/all]the Explore page[/url], since that's internally based on Scratch's search engine."
                    },
                    
        4: {"name": "Search Engine Down (+ User Searching Instructions)",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "If you want to [url=https://en.scratch-wiki.info/wiki/How_do_I_search_for_a_user%3F]search for a user[/url], use a link like this: " +
                    "[quote]https://scratch.mit.edu/users/USERNAME/[/quote]"},
                    
        9: {"name": "Cloud Variables Resetting",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "If you own the project with the broken cloud variables, try renaming those variables.\n\n" +
                    "If you don't own the project with the broken cloud variables, please ask the owner of that project to rename their cloud variables."},
                    
        12: {"name": "Cloud Variables Down",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "Cloud variables are currently broken, and all we can do is wait for them to be fixed.\n" +
                    "Unfortunately, no one seems to know what's causing issues or when they will be fixed.\n" +
                    "This affects every Scratcher, so the Scratch Team is aware of the situation."},
                    
        11: {"name": "Browser Information Instructions",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "When replying, could you click the globe icon (to the right of the emoji) to show what device and browser you're using?"},
            
        24: {"name": "Can't Become a Scratcher (No Next Button)",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": 'When you get to the Community Guidelines page, try selecting everything with the key combo Ctrl+A.\n' +
                    "(If you don't have a keyboard, look up how to select everything on the page and try that instead.)\n\n" +
                    'That should make a blue box appear near the bottom-right corner of the page, which you can use to progress.\n\n' +
                    '[img]https://u.cubeupload.com/rosics/Screenshot2025010420.png[/img][small]Screenshot taken by [url=https://scratch.mit.edu/users/Rosics]@Rosics[/url][/small]\n\n' +
                    "If that doesn't work, just keep clicking in the bottom-right corner of the page.\n\n" +
                    'Once you press the "I Agree" button, you [i]will[/i] be a Scratcher, even if nothing seems to happen.'},
                    
        28: {"name": "Search Engine Down (Japanese)",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "この投稿は Google 翻訳を使用して翻訳されました。間違いがあればお知らせください。\n\n---\n\n[url=https://scratch.mit.edu/discuss/topic/790866/]Scratch の検索エンジンは現在壊れています[/url]。私たちにできることは修正されるのを待つことだけです。\n残念ながら、何が問題を引き起こしているのか、いつ修正されるのかは誰も分からないようです。\nこれは Scratch の全員に影響するため、Scratch チームは状況を認識しています。\n\n現時点では、Google などの検索エンジンに「site:scratch.mit.edu [i](検索クエリ)[/i]」と入力すると、このバグを回避できます。\n\n[url=https://scratch.mit.edu/explore/projects/all]Explore ページは内部的に Scratch の検索エンジンに基づいているため[/url]、これは Explore ページにも影響します。\n\n[small][url=https://scratch.mit.edu/discuss/post/8327640/](English version)[/url][/small]\n\n---\n\n[url=https://scratch.mit.edu/discuss/18/]日本語話者向けの Scratch フォーラムをチェックしてください[/url] :)"},
                    
        // Suggestions
        
        5: {"name": "Duplicate Suggestion",
            "text": true,
            "hidden": false,
            "editable": true,
            "data": "This appears to be a duplicate of [url=__EDITABLE__]an earlier suggestion[/url].\n" +
                    "Please use the linked topic to keep the discussion all in one place :)\n\n" +
                    "For future reference, you can use the [url=https://scratch.mit.edu/discuss/topic/657522/]Suggestions Directory[/url] or [url=https://ocular.jeffalo.net/]Ocular[/url] to check for duplicates."},
                    
        10: {"name": "Rejected Suggestion",
            "text": false,
            "hidden": false,
            "editable": false,
            "function": "rejected()"},
            
        "rejectedOriginal": {"name": "Rejected Suggestion (Original)",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "Unfortunately, this suggestion is rejected.\n\n" +
                    "From [url=https://scratch.mit.edu/discuss/topic/343602/]The Official List of Rejected Suggestions[/url]:\n" +
                    "[quote=Za-Chary]View_source_then_find_the_rejected_suggestion_then_paste_it_here[/quote]"},
                    
        27: {"name": "Dark Mode (Duplicate Suggestion)",
            "text": true,
            "hidden": false,
            "data": "This appears to be a duplicate of two earlier suggestions.\n\n" +
                    "Website dark mode: https://scratch.mit.edu/discuss/topic/296027/\n" +
                    "Editor dark mode: https://scratch.mit.edu/discuss/topic/217797/\n\n" +
                    "Please use the linked topics to keep the discussion all in one place :)\n\n" +
                    "For future reference, you can use the [url=https://scratch.mit.edu/discuss/topic/657522/]Suggestions Directory[/url] or [url=https://ocular.jeffalo.net/]Ocular[/url] to check for duplicates."},
                    
        // General
        
        7: {"name": "Duplicate Topic",
            "text": true,
            "hidden": false,
            "editable": true,
            "data": "This appears to be a duplicate of [url=__EDITABLE__]an earlier topic[/url].\n" +
                    "Please use the linked topic to keep the discussion all in one place :)\n\n" +
                    "For future reference, you can use the third-party search engine [url=https://ocular.jeffalo.net/]Ocular[/url] to check for duplicates."},
                    
        8: {"name": "Topic Closing Instructions",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "If you don't see a Close Topic button anywhere, you can just report the original post and ask the Scratch Team to close it in the textbox.\n\n" +
                    "I'll do that for you right now. :)"},
                    
        23: {"name": "Welcome to the Forums",
            "text": true,
            "hidden": false,
            "editable": false,
            "data": "Welcome to the forums! Check out the Sticky topics in [url=https://scratch.mit.edu/discuss/6/]the New Scratchers forum[/url] for guidance.\n" +
                    "(See more information at the Scratch Wiki: [wiki]Discussion Forums[/wiki])"},
                    
        // Things I'm [...]
        
        21: {"name": "Duplicate Topic (Things I'm Making and Creating)",
            "text": true,
            "hidden": false,
            "editable": true,
            "data": "This appears to be a duplicate of [url=__EDITABLE__]an earlier topic[/url].\n" +
                    "Please use the linked topic to keep the discussion all in one place :)\n\n" +
                    "For future reference, you can use the [url=https://scratch.mit.edu/discuss/topic/776027/]Things I'm Making and Creating Directory[/url] or [url=https://ocular.jeffalo.net/]Ocular[/url] to check for duplicates."},
                    
        22: {"name": "Duplicate Topic (Things I'm Reading and Playing)",
            "text": true,
            "hidden": false,
            "editable": true,
            "data": "This appears to be a duplicate of [url=__EDITABLE__]an earlier topic[/url].\n" +
                    "Please use the linked topic to keep the discussion all in one place :)\n\n" +
                    "For future reference, you can use the [url=https://scratch.mit.edu/discuss/topic/735680/]Things I'm Reading and Playing Topic Directory[/url] or [url=https://ocular.jeffalo.net/]Ocular[/url] to check for duplicates."},
                        
        // Questions about Scratch
        
        26: {"name": "4.0 Release Date",
            "text": true,
            "hidden": false,
            "data": "No one knows when Scratch 4.0 will be released, not even the Scratch Team.\n\n" +
                    "Scratch 4.0 is supposed to start development in 2025, but its release date is still a mystery.\n\n" +
                    "Let's wait for more information on Scratch 4.0 before trying to find out when it will release."},
                    
        // Testing
        
        "test": {"name": "> TESTING <",
            "text": false,
            "hidden": true,
            "data": ["this page doesn't exist", "test", 14, 15, Math.imul(3, 5) + 1, 17, 18, 0, "goTo"]},
        
        14: {"name": "Hidden item 1",
            "text": true,
            "hidden": true,
            "data": "HELLO WORLD"},
                    
        15: {"name": "Hidden item 2!",
            "text": false,
            "hidden": true,
            "data": [1, 2, 3]},
            
        16: {"name": "Invalid content 1",
            "text": false,
            "hidden": false,
            "data": "Wow"},
            
        17: {"name": "Invalid content 2",
            "text": true,
            "hidden": false,
            "editable": true,
            "data": [1, 2, "__EDITABLE__", 4, 5]},
            
        18: {"name": "Invalid content 3!",
            "text": false,
            "hidden": false,
            "data": true},
            
        "goTo": {"name": "Go to any item",
            "text": false,
            "hidden": false,
            "function": 'dataView.insertAdjacentHTML("beforeend",`<p><input type="text" placeholder="Item name" id="itemname"> <button onclick="displayView(document.querySelector(\'#itemname\').value)">Go</button></p>`)'},
            
      }
      
      viewData[4].data = viewData[3].data + "\n\n" + viewData[4].data; // Add "Search Engine Down" to "Search Engine Down (+ User Searching Instructions)"
      
      // View data ends here
      
      var dataView = document.querySelector("#dataView");
      var textDisplay = document.querySelector("#textDisplay");
      var textEditable = document.querySelector("#textEditable");
      var copier = document.querySelector("#copier");
      
      var rejectedLoading = document.querySelector("#rejectedLoading");
      var rejectedChooser = document.querySelector("#rejectedChooser");
      var rejectedData = "";
      
      var viewHistory = [];
      var viewing;
      
      function show(element) { element.style.display = "block"; }
      function hide(element) { element.style.display = "none"; }
      function setCopier(copierText) { copier.value = copierText; }
      
      function appendLink(id, name, back) {
        if (!viewData[id].hidden) {
          var linkContainer = document.createElement("p");
          var linkElement = document.createElement("button");
          linkElement.innerText = name ?? viewData[id].name;
          
          if (back) {
            linkElement.onclick = function() { displayLastItem(); };
          } else {
            linkElement.onclick = function() { displayView(id); };
          }
          
          linkContainer.append(linkElement);
          dataView.append(linkContainer);
        }
      }
      
      function displayLastItem() {
        viewHistory.pop(); displayView(viewHistory.pop());
      }
      
      function displayView(id) {
        if (id == undefined) { id = 0; }
        viewing = id;
        var data = viewData[id];
        
        console.log("Displaying data at ID " + id, data);
        
        if (data != undefined) {
          document.querySelector("#displayName").innerText = data.name;
          dataView.replaceChildren();
          
          // Append "Back" link and hide everything (except for the name)
          
          viewHistory.push(id);
          if (viewHistory.length > 1) { appendLink(0, "<= Back to previous page <=", true); }
          
          hide(textEditable);
          hide(textDisplay);
          hide(rejectedLoading);
          hide(rejectedChooser);
          document.querySelector("#editBox").value = "";
          
          // Start handling data
          
          if (data.text) {
            show(textDisplay);
            setCopier(data.data.toString());
            
            if (data.editable) {
              show(textEditable);
            }
          } else {
            if (data.function) {
              eval?.(`"use strict";${data.function}`);
            } else {
              if (typeof data.data == "object") {
                data.data.forEach((element) => {
                  try { appendLink(element, null, false); }
                  catch (exception) { console.error(exception); }
                });
              }
            }
          }
        }
      }
      
      function replaceEditable(edit) {
        if (edit == "") { edit = "__EDITABLE__"; }
        setCopier(viewData[viewing].data.toString().replace("__EDITABLE__", edit));
      }
      
      displayView(0, false);
      
      // Rejected Suggestions code starts here
      
      async function getRejected() {
        if (rejectedData == "") { // If rejected suggestions data has not already been fetched
          if (!window.navigator.onLine) { alert("Please connect to the Internet."); return false; }
          try {
            const response = await fetch("https://scratch.mit.edu/discuss/post/3466932/source/");
            if (!response.ok) { throw new Error(`Response status: ${response.status}`); }
            rejectedData = await response.text();
            return true;
          } catch (e) {
            console.error(e);
            alert("Something went wrong fetching rejected suggestions. Check this browser's console for more information.");
            return false;
          }
        } else {return true}
      }
      
      function rejected() {
        hide(rejectedLoading);
        show(rejectedChooser);
        document.querySelector("#rejectedNumber").value = "";
      }
      
      function quoteRejected(rejectedNumber) {
        show(rejectedLoading);
        hide(rejectedChooser);
          
        getRejected().then((good) => {
          if (good) {
            hide(rejectedLoading);
            var rejectedQuote = "";
              
            // Attempt to find rejected suggestion text, and alert if not found

            var quoteDelimiter = (parseFloat(rejectedNumber) > 0) ? ("[b]" + rejectedNumber + " ") : null;
            try { rejectedQuote = (quoteDelimiter + rejectedData.split(quoteDelimiter)[1].split("[b")[0]).trim(); } // Find text between "[b]X.Y " and "[b]"
            catch (e) { console.error(e.message); show(rejectedChooser); alert("That doesn't seem to be a valid suggestion number. Check for typos."); }
              
            if (rejectedQuote != "") {
              hide(textEditable);
              hide(rejectedChooser);
                
              show(textDisplay);
              setCopier("Unfortunately, this suggestion may be rejected.\n\n" +
                        "From [url=https://scratch.mit.edu/discuss/topic/343602/]The Official List of Rejected Suggestions[/url]:\n" +
                        "[quote=Za-Chary]" + rejectedQuote + "[/quote]");
            }
          } else { rejected(); }
        })
      }
    </script>
    
    <script src="/stable.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html>
  <head>
    <title>the post generation station</title>
    <link href="/dark.css" rel="stylesheet" type="text/css" media="all">
  </head>
  
  <body>
    <h1>Automatically fill out Imagif Hosters template</h1>
    
    <div id="start">
      <div>
        <label for="note">Optional note:</label>
        <input type="text" placeholder="Done! Thank you for using Imagif Hosters :)" name="note" id="note">
      </div>
      <br>
      <div>
        <label for="link">Link to image on u.cubeupload.com:</label>
        <input type="text" placeholder="https://u.cubeupload.com/user/filename.png" name="link" id="link">
        <button onclick='checkInputs();' name="link">go!</button>
      </div>
      <br>
      <a href="https://cubeupload.com" target="blank">(Open Cubeupload in new tab)</a>
    </div>
    
    <div id="middle" style="display: none;">
      <p>Go to the Imagif Hosters topic, click "Quote" on the original order, then paste this text below the quote.</p>
      <textarea style='width: 50em; height: 10em;' onclick='this.select();' id="middleText" readonly></textarea>
      <br><br>
      <div>
        <label for="post">Link to your post:</label>
        <input type="text" placeholder="https://scratch.mit.edu/discuss/post/8437771/" name="post" id="post">
        <button onclick='checkPost();' name="post">go!</button>
      </div>
    </div>
    
    <div id="end" style="display: none;">
      <p>Comment this on the profile of the user who originally ordered, and you're all done!</p>
      <textarea style='width: 30em; height: 3em;' onclick='this.select();' id="endText" readonly></textarea><br><br>
      <a href="">Click here to use this tool again.</a>
    </div>
    
    <p>Or use the bump template:
    <br><br><textarea style='width: 32em; height: 2em;' onclick='this.select();' readonly>[img=https://u.cubeupload.com/eason_9_lol/TIFBump.png]</textarea></p>
    
    <small>This webpage was made for use with <a href="https://scratch.mit.edu/discuss/topic/810421/">Imagif Hosters</a>, a Scratch forum shop.
    <br><a href='https://github.com/voxalice2/voxalice2.github.io/blob/main/imagif.html'>Click here to view this webpage's source code!</a>
    <br><br><details><summary>Updates</summary><hr>
    Update 1 (2024-11-11) - Original version<hr>
    Update 2 (2024-11-16) - Made textareas read-only<hr>
    Update 3 (2024-12-05) - Fixed appearance of bump template and rephrased some text<hr>
    Update 4 (2025-02-13) - Cleaned up code and improved HTML semantics<hr>
    Update 5 (2025-03-07) - Updated links to Imagif Hosters
    </details></small>
    
    <script>
      function checkInputs() {
        if ( document.querySelector("#link").value.indexOf('u.cubeupload.com') < 0 ) {
          alert("Please use a link that has 'u.cubeupload.com' in it.");
        } else {
          fillTemplate();
        }
      }
    
      function fillTemplate() {
        var input_note = document.querySelector("#note").value || "Done! Thank you for using Imagif Hosters :)";
        
        var input_link = document.querySelector("#link").value;
        
        document.querySelector("#middleText").innerHTML = `${input_note}\n\n` +
        `[img]${input_link}[/img]\n\n` +
        `[b]BBCode:[/b] (for forums) [code][img]${input_link}[/img][/code]\n` +
        `[b]HTML:[/b] (for websites) [code=html]<img src="${input_link}" alt="Image">[/code]`;
        
        document.querySelector("#start").style.display = 'none';
        document.querySelector("#middle").style.display = 'block';
      }
      
      function checkPost() {
        if ( document.querySelector("#post").value.indexOf('scratch.mit.edu/discuss/post/') < 0 ) {
          alert("Please use a link that has 'scratch.mit.edu/discuss/post/' in it.");
        } else {
          var input_post = document.querySelector("#post").value;
          
          document.querySelector("#endText").innerHTML = `Your order from Imagif Hosters is complete! ${input_post}`;
          
          document.querySelector("#middle").style.display = 'none';
          document.querySelector("#end").style.display = 'block';
        }
      }
    </script>
    
    <script src="/stable.js"></script>
  </body>
</html>
